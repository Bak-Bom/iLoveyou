<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üíñ ‡∏ñ‡∏∂‡∏á‡πÄ‡∏ò‡∏≠‡∏Ñ‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©</title>

<link href="https://fonts.googleapis.com/css2?family=Itim&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

<style>
:root{
  --pink:#ff8fcf;
  --hot:#ff4d9e;
  --purple:#d6a7ff;
  --text:#fff0f8;
}

*{
  box-sizing:border-box;
  -webkit-tap-highlight-color:transparent;
}

body{
  margin:0;
  height:100vh;
  background:
    radial-gradient(800px 400px at 15% -10%, #ff9fd955, transparent),
    radial-gradient(700px 500px at 85% 20%, #d6a7ff55, transparent),
    linear-gradient(180deg,#12061f,#07030f);
  display:flex;
  align-items:center;
  justify-content:center;
  font-family:'Poppins',sans-serif;
  overflow:hidden;
  color:#ff8fcf;
  position:relative;
  z-index:1;
}

.hearts span{
  position:fixed;
  bottom:-40px;
  font-size:22px;
  opacity:.7;
  animation:floatUp 9s linear infinite;
  pointer-events:none;
}
@keyframes floatUp{
  to{
    transform:translateY(-120vh) rotate(360deg);
    opacity:0;
  }
}

.letter-wrap{
  position:absolute;
  perspective:1600px;
  transform-style:preserve-3d;
  animation:
    premiumFloatIn 3.8s cubic-bezier(.25,.9,.35,1) forwards,
    softHover 6s ease-in-out infinite 3.8s;
}

@keyframes premiumFloatIn{
  0%{
    transform:
      translate3d(0,-160vh,-700px)
      rotateX(14deg)
      rotateZ(-4deg)
      scale(.6);
    opacity:0;
    filter:blur(8px);
  }

  45%{
    transform:
      translate3d(0,-70vh,-320px)
      rotateX(6deg)
      rotateZ(2deg)
      scale(.88);
    opacity:1;
    filter:blur(3px);
  }

  75%{
    transform:
      translate3d(0,8px,-80px)
      rotateX(2deg)
      rotateZ(-1deg)
      scale(1.04);
    filter:blur(0);
  }

  88%{
    transform:
      translate3d(0,-4px,0)
      rotateX(-1deg)
      rotateZ(1deg)
      scale(.98);
  }

  100%{
    transform:
      translate3d(0,0,0)
      rotateX(0)
      rotateZ(0)
      scale(1);
  }
}

@keyframes softHover{
  0%{
    transform:translateY(0);
  }
  50%{
    transform:translateY(-12px);
  }
  100%{
    transform:translateY(0);
  }
}

@keyframes dropSoft{
  from{transform:translateY(-200vh) scale(.4);opacity:0}
  to{transform:none;opacity:1}
}

.letter{
  width:300px;
  height:200px;
  background:linear-gradient(145deg,#ffd1e8,#ffc1dc);
  border-radius:24px;
  position:relative;
  cursor:pointer;
  transition:transform .6s ease;
  box-shadow:
    0 12px 40px rgba(255,143,207,.35),
    0 0 120px rgba(214,167,255,.25),
    inset 0 0 28px rgba(255,255,255,.9);
}
.letter:hover{
  transform:scale(1.08) rotate(1deg);
}

.letter::before{
  content:"";
  position:absolute;
  inset:0;
  clip-path:polygon(0 0,100% 0,50% 60%);
  background:linear-gradient(180deg,#fff,#ffd6ea);
}

.seal{
  position:absolute;
  bottom:26px;
  left:50%;
  transform:translateX(-50%);
  width:58px;
  height:58px;
  border-radius:50%;
  background:linear-gradient(135deg,#ff4d9e,#d6a7ff);
  color:#fff;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:24px;
  box-shadow:
    0 0 40px #ff4d9ecc,
    inset 0 0 10px #fff;
  animation:sealPulse 2s infinite;
}
@keyframes sealPulse{
  50%{transform:translateX(-50%) scale(1.15)}
}

.overlay{
  position:fixed;
  inset:0;
  background:
    radial-gradient(circle at top,#ffffff33,transparent 60%),
    rgba(0,0,0,.88);
  backdrop-filter:blur(16px);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:1000;
}

.popup{
  width:min(94%,540px);
  padding:70px 56px;
  border-radius:48px;
  background:
    linear-gradient(145deg,#ffe1f0,#ffd1f7,#edd9ff);
  box-shadow:
    0 100px 260px #ff4d9e99,
    inset 0 0 50px #ffffffcc;
  text-align:center;
  position:relative;
  z-index:1001;
  animation:popupCute 1s cubic-bezier(.18,1.6,.4,1);
}

@keyframes popupCute{
  0%{transform:scale(.2) rotate(-14deg);opacity:0}
  60%{transform:scale(1.15) rotate(4deg)}
  100%{transform:scale(1) rotate(0)}
}

.popup::after{
  content:"";
  position:absolute;
  inset:-10px;
  border-radius:54px;
  border:4px dotted #fff;
  opacity:.8;
  animation:spin 14s linear infinite;
  pointer-events:none;
}
@keyframes spin{
  to{transform:rotate(360deg)}
}

h1{
  font-family:'Itim';
  font-size:3rem;
  margin-bottom:24px;
  color:#ff4d9e;
}

p{
  font-size:1.15rem;
  line-height:2;
  min-height:120px;
}

.buttons{
  margin-top:48px;
  display:flex;
  justify-content:center;
  gap:26px;
  position:relative;
}

.buttons button{
  width:200px;
  height:64px;
  border-radius:999px;
  border:none;
  font-size:1.05rem;
  font-weight:800;
  cursor:pointer;
  transition:
    transform .18s ease,
    box-shadow .25s ease,
    filter .25s ease;
}

.yes{
  background:linear-gradient(135deg,#ff4d9e,#d6a7ff);
  color:#fff;
  box-shadow:
    0 0 0 6px #fff,
    0 0 80px #ff4d9e;
  animation:heartBeat 1.5s infinite;
  z-index:5;
}

@keyframes heartBeat{
  0%,100%{transform:scale(1)}
  40%{transform:scale(1.18)}
}

.yes:hover{
  filter:brightness(1.12);
}
.yes:active{
  transform:scale(.94);
}

.no{
  background:#fff;
  color:#ff4d9e;
  border:3px dashed #ff8fcf;
  box-shadow:0 0 30px #ff8fcf55;
  z-index:6;
  user-select:none;
  touch-action:manipulation;
}
.no:hover{
  background:#ffe6f3;
}

.final{
  position:fixed;
  inset:0;
  background:radial-gradient(circle,#ff8fcf66,#000);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:2000;
}

.final-box{
  padding:90px;
  border-radius:60px;
  background:linear-gradient(135deg,#ff8fcf,#d6a7ff);
  box-shadow:
    0 0 0 12px #fff,
    0 0 260px #ff4d9e;
  text-align:center;
}

.final{
  position:fixed;
  inset:0;
  display:none;
  align-items:center;
  justify-content:center;
  background:
    radial-gradient(circle at top,#ffb6e6aa,transparent 60%),
    linear-gradient(180deg,#12061f,#000);
  overflow:hidden;
  z-index:3000;
}

.final-stars::before{
  content:"";
  position:absolute;
  inset:0;
  background:
    radial-gradient(2px 2px at 20% 30%,#fff,transparent),
    radial-gradient(2px 2px at 70% 60%,#fff,transparent),
    radial-gradient(1.5px 1.5px at 40% 80%,#fff,transparent);
  animation:twinkle 4s infinite alternate;
}

@keyframes twinkle{
  from{opacity:.3}
  to{opacity:.8}
}

.final-card{
  position:relative;
  padding:90px 80px;
  border-radius:60px;
  background:
    linear-gradient(135deg,#ffe1f0,#ffd1f7,#edd9ff);
  box-shadow:
    0 0 0 12px #fff,
    0 0 320px #ff4d9e;
  text-align:center;
  animation:finalPop 1.2s cubic-bezier(.18,1.6,.4,1);
}

@keyframes finalPop{
  0%{transform:scale(.2) rotate(-12deg);opacity:0}
  60%{transform:scale(1.1) rotate(4deg)}
  100%{transform:scale(1) rotate(0)}
}

.ring{
  font-size:64px;
  margin-bottom:20px;
  animation:ringFloat 2s infinite ease-in-out;
}

@keyframes ringFloat{
  50%{transform:translateY(-10px) rotate(6deg)}
}

.final-card h2{
  font-family:'Itim';
  font-size:3.2rem;
  color:#ff4d9e;
  margin-bottom:26px;
}

.final-card p{
  font-size:1.25rem;
  line-height:2;
  color:#6a1b4d;
}

.final-btn{
  margin-top:40px;
  width:240px;
  height:64px;
  border:none;
  border-radius:999px;
  background:linear-gradient(135deg,#ff4d9e,#d6a7ff);
  color:#fff;
  font-size:1.1rem;
  font-weight:800;
  cursor:pointer;
  box-shadow:
    0 0 0 6px #fff,
    0 0 80px #ff4d9e;
  transition:.25s ease;
}

.final-btn:hover{
  transform:scale(1.08);
  filter:brightness(1.15);
}

.hug{
  position:fixed;
  inset:0;
  display:none;
  align-items:center;
  justify-content:center;
  background:
    radial-gradient(circle at center,#ffd6ea88,transparent 65%),
    linear-gradient(180deg,#000,#12061f);
  z-index:5000;
  overflow:hidden;
}

.hug-glow{
  position:absolute;
  width:140%;
  height:140%;
  background:radial-gradient(circle,#ffb6e6aa,transparent 70%);
  animation:slowGlow 6s infinite alternate;
}

@keyframes slowGlow{
  from{transform:scale(.9)}
  to{transform:scale(1.1)}
}

.hug-box{
  position:relative;
  padding:100px 90px;
  border-radius:70px;
  background:linear-gradient(135deg,#fff0f8,#ffd1f7,#edd9ff);
  box-shadow:
    0 0 0 14px #fff,
    0 0 360px #ff4d9e;
  text-align:center;
  animation:hugPop 1.4s cubic-bezier(.18,1.7,.4,1);
}

@keyframes hugPop{
  0%{transform:scale(.15) rotate(-18deg);opacity:0}
  60%{transform:scale(1.15) rotate(6deg)}
  100%{transform:scale(1) rotate(0)}
}

.hug-heart{
  font-size:76px;
  margin-bottom:26px;
  animation:heartFloat 2s infinite ease-in-out;
}

@keyframes heartFloat{
  50%{transform:translateY(-14px) scale(1.1)}
}

.hug-box h2{
  font-family:'Itim';
  font-size:3.4rem;
  color:#ff4d9e;
  margin-bottom:30px;
}

.hug-box p{
  font-size:1.3rem;
  line-height:2.2;
  color:#6a1b4d;
}

.hug-btn{
  margin-top:48px;
  width:280px;
  height:68px;
  border:none;
  border-radius:999px;
  background:linear-gradient(135deg,#ff4d9e,#d6a7ff);
  color:#fff;
  font-size:1.15rem;
  font-weight:900;
  cursor:pointer;
  box-shadow:
    0 0 0 8px #fff,
    0 0 120px #ff4d9e;
  transition:.3s ease;
}

.hug-btn:hover{
  transform:scale(1.12);
  filter:brightness(1.2);
}

.ending{
  position:fixed;
  inset:0;
  background:
    radial-gradient(circle at center,#ffd6ea88,transparent 65%),
    rgba(0,0,0,.75);
  backdrop-filter:blur(18px);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:9999;
  animation:fadeIn .8s ease;
}

@keyframes fadeIn{
  from{opacity:0}
  to{opacity:1}
}

.ending-box{
  background:linear-gradient(135deg,#fff0f8,#ffd1f7,#edd9ff);
  padding:70px 80px;
  border-radius:60px;
  text-align:center;
  box-shadow:
    0 0 0 14px #fff,
    0 0 280px #ff4d9e;
  animation:endingPop 1.2s cubic-bezier(.18,1.7,.4,1);
}

@keyframes endingPop{
  0%{transform:scale(.2) rotate(-12deg);opacity:0}
  60%{transform:scale(1.1) rotate(4deg)}
  100%{transform:scale(1) rotate(0)}
}

.ending-gif{
  width:220px;
  margin-bottom:28px;
  border-radius:30px;
}

#endingText{
  font-family:'Itim';
  font-size:1.6rem;
  line-height:2;
  color:#ff4d9e;
  min-height:80px;
}

p{
  color:#ff6fb1;
}

#text,
#finalText,
#hugText,
#finaleText,
#endingText{
  color:#ff4d9e;
}

.bg-hearts{
  position:fixed;
  inset:0;
  overflow:hidden;
  pointer-events:none;
  z-index:0;
}

.bg-hearts .heart{
  position:absolute;
  bottom:-160px;

  width:40px;
  height:40px;

  background:linear-gradient(135deg,#ff9ecf,#d6a7ff);
  transform:rotate(45deg);

  animation:heartUp linear infinite;
  opacity:.18;

  filter:
    blur(3px)
    drop-shadow(0 0 12px #ff8fcf)
    drop-shadow(0 0 26px #ff4d9e);
}

.bg-hearts .heart::before,
.bg-hearts .heart::after{
  content:"";
  position:absolute;
  width:100%;
  height:100%;
  background:inherit;
  border-radius:50%;
}

.bg-hearts .heart::before{
  top:-50%;
  left:0;
}

.bg-hearts .heart::after{
  left:-50%;
  top:0;
}

@keyframes heartUp{
  from{
    transform:translateY(0) rotate(45deg);
    opacity:0;
  }
  15%{opacity:.22}
  to{
    transform:translateY(-130vh) rotate(45deg);
    opacity:0;
  }
}

.grand-finale{
  position:fixed;
  inset:0;
  display:none;
  align-items:center;
  justify-content:center;
  background:
    radial-gradient(circle at center,#ffb6e6aa,transparent 60%),
    linear-gradient(180deg,#12061f,#000);
  z-index:12000;
  overflow:hidden;
  animation:fadeIn 1.2s ease;
}

.finale-glow{
  position:absolute;
  width:160%;
  height:160%;
  background:radial-gradient(circle,#ff8fcf88,transparent 70%);
  animation:slowGlow 8s infinite alternate;
}

.finale-box{
  position:relative;
  padding:110px 100px;
  border-radius:80px;
  background:linear-gradient(135deg,#fff0f8,#ffd1f7,#edd9ff);
  box-shadow:
    0 0 0 16px #fff,
    0 0 400px #ff4d9e;
  text-align:center;
  animation:finalPop 1.6s cubic-bezier(.18,1.8,.4,1);
}

.finale-box h2{
  font-family:'Itim';
  font-size:3.6rem;
  color:#ff4d9e;
  margin-bottom:30px;
}

#finaleText{
  font-family:'Itim';
  font-size:1.5rem;
  line-height:2.2;
  color:##ff8fcf;
  min-height:120px;
}

.finale-gif{
  width:110px;
  height:auto;
  border-radius:24px;
  box-shadow:
    0 0 40px #ff8fcf,
    0 0 80px #ff4d9e;
  animation:heartFloat 2.2s infinite ease-in-out;
}

.finale-heart{
  font-size: 0;          
  line-height: 0;
  margin-bottom: 30px;
}

</style>
</head>

<body>

<div class="letter-wrap">
  <div class="letter" onclick="openLetter()">
    <div class="seal">üíå</div>
  </div>
</div>
<div class="overlay" id="overlay">
  <div class="popup">
    <h1>‡∏ñ‡∏∂‡∏á‡πÄ‡∏ò‡∏≠‡∏Ñ‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏© üíñ</h1>
    <p id="text"></p>

    <div class="buttons">
      <button class="yes" onclick="accept()">‡∏ï‡∏Å‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ü‡∏ô üíû</button>
      <button class="no" id="no">‡πÑ‡∏°‡πà‡πÅ‡∏ô‡πà‡πÉ‡∏à üôà</button>
    </div>
  </div>
</div>

<div class="final" id="final">
  <div class="final-card">
    <h2>‡πÄ‡∏£‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ü‡∏ô‡∏Å‡∏±‡∏ô‡πÅ‡∏•‡πâ‡∏ß üíñ</h2>
    <p id="finalText"></p>
    <button class="final-btn" onclick="closeFinal()">‡∏Å‡∏≠‡∏î‡∏Å‡∏±‡∏ôü§ç</button>
  </div>
</div>

<div class="hug" id="hug">
  <div class="hug-box">
    <h2>‡∏°‡∏≤‡∏Å‡∏≠‡∏î‡∏Å‡∏±‡∏ô‡∏ô‡∏∞ ü§ç</h2>
    <p id="hugText"></p>
    <button class="final-btn" onclick="closeHug()">‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô‡∏ô‡∏∞</button>
  </div>
</div>

<div class="hug" id="hug">
  <div class="hug-glow"></div>

  <div class="hug-box">
    <div class="hug-heart">ü§ç</div>

    <h2>‡∏°‡∏≤‡∏Å‡∏≠‡∏î‡∏Å‡∏±‡∏ô‡∏ô‡∏∞</h2>
    <p id="hugText"></p>

    <button class="hug-btn" onclick="closeHug()">
      ‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô ü§ç
    </button>
  </div>
</div>

<div class="ending" id="ending">
  <div class="ending-box">
    <img 
      src="https://s12.gifyu.com/images/bkKZJ.gif"
      alt="cute bear"
      class="ending-gif"
    >

    <p id="endingText"></p>
  </div>
</div>

<div class="bg-hearts"></div>

<div class="grand-finale" id="grandFinale">
  <div class="finale-glow"></div>

  <div class="finale-box">
<div class="finale-heart">
  <img 
    src="https://s12.gifyu.com/images/bkKZJ.gif" 
    alt="love gif"
    class="finale-gif"
  >
</div>
    <h2>‡∏à‡∏≤‡∏Å‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÑ‡∏õ‚Ä¶</h2>
    <p id="finaleText"></p>
  </div>
</div>

<script>
const overlay = document.getElementById("overlay");
const final = document.getElementById("final");
const hug = document.getElementById("hug");

const textEl = document.getElementById("text");
const finalTextEl = document.getElementById("finalText");
const hugTextEl = document.getElementById("hugText");
const noBtn = document.getElementById("no");
const ending = document.getElementById("ending");
const endingTextEl = document.getElementById("endingText");

const endingMessage = `‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô‡∏ô‡∏∞ ü§ç  
‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏õ‡πÑ‡∏´‡∏ô‡πÅ‡∏•‡πâ‡∏ß  
‡∏´‡∏±‡∏ß‡πÉ‡∏à‡πÄ‡∏£‡∏≤‡∏Ç‡∏≠‡∏ù‡∏≤‡∏Å‡πÑ‡∏ß‡πâ‡∏Å‡∏±‡∏ö‡πÄ‡∏ò‡∏≠‡πÄ‡∏•‡∏¢ ü•∫üíû`;

let dodging = false;
let wordIndex = 0;
let typingTimer = null;

const introText = `‡πÄ‡∏£‡∏≤‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏Å‡πà‡∏á‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏û‡∏π‡∏î‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà  
‡πÄ‡∏•‡∏¢‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏à‡∏ó‡∏≥‡∏™‡∏¥‡πà‡∏á‡∏ô‡∏µ‡πâ‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤  

‡∏≠‡∏¢‡∏≤‡∏Å‡πÉ‡∏´‡πâ‡πÄ‡∏ò‡∏≠‡∏£‡∏π‡πâ‡∏ß‡πà‡∏≤  
‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡πÑ‡∏õ  
‡∏°‡∏±‡∏ô‡∏≠‡∏≠‡∏Å‡∏°‡∏≤‡∏à‡∏≤‡∏Å‡πÉ‡∏à‡∏à‡∏£‡∏¥‡∏á ‡πÜ ‡∏ô‡∏∞`;
  
const finalMessage = `‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ‡∏ô‡∏µ‡πâ‡πÑ‡∏õ  
‡∏´‡∏±‡∏ß‡πÉ‡∏à‡πÄ‡∏£‡∏≤‡∏Ç‡∏≠‡∏°‡∏≠‡∏ö‡πÉ‡∏´‡πâ‡πÄ‡∏ò‡∏≠‡∏Ñ‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏ô‡∏∞ ü•∫üíï  
`;

const hugMessage = `‡∏Å‡∏≠‡∏î‡∏ô‡∏µ‡πâ‡∏≠‡∏≤‡∏à‡∏à‡∏∞‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏Å‡∏≠‡∏î‡∏à‡∏£‡∏¥‡∏á  
‡πÅ‡∏ï‡πà‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡πÑ‡∏õ  
‡∏à‡∏£‡∏¥‡∏á‡∏Å‡∏ß‡πà‡∏≤‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏•‡∏¢‡∏ô‡∏∞ ü•∫üíû  

‡∏£‡∏±‡∏Å‡πÄ‡∏ò‡∏≠‡∏°‡∏≤‡∏Å‡∏ô‡∏∞`;

const teaseTexts = [
  "‡πÄ‡∏≠‡πä‡∏∞ ‡πÜ ‡πÉ‡∏à‡πÄ‡∏¢‡πá‡∏ô‡∏Å‡πà‡∏≠‡∏ô üò≥",
  "‡πÅ‡∏≠‡∏ö‡πÄ‡∏Ç‡∏¥‡∏ô‡∏ô‡∏∞ ‡∏ñ‡πâ‡∏≤‡∏à‡∏∞‡∏Å‡∏î‡∏≠‡∏±‡∏ô‡∏ô‡∏µ‡πâ üòÜ",
  "‡πÄ‡∏î‡∏µ‡πã‡∏¢‡∏ß‡∏´‡∏±‡∏ß‡πÉ‡∏à‡πÄ‡∏£‡∏≤‡∏´‡∏•‡∏∏‡∏î‡∏≠‡∏≠‡∏Å‡∏°‡∏≤‡πÅ‡∏•‡πâ‡∏ß üíì",
  "‡∏≠‡∏¢‡πà‡∏≤‡πÅ‡∏Å‡∏•‡πâ‡∏á‡∏Å‡∏±‡∏ô‡∏™‡∏¥ ‡πÄ‡∏£‡∏≤‡∏à‡∏£‡∏¥‡∏á‡∏à‡∏±‡∏á‡∏ô‡∏∞ ü•∫",
  "‡∏°‡∏±‡∏ô‡∏°‡∏µ‡∏≠‡∏µ‡∏Å‡∏õ‡∏∏‡πà‡∏°‡∏ô‡∏∂‡∏á ‡∏•‡∏≠‡∏á‡∏î‡∏π‡∏´‡∏ô‡πà‡∏≠‡∏¢ üëÄ",
  "‡πÄ‡∏£‡∏≤‡∏ô‡∏±‡πà‡∏á‡∏¢‡∏¥‡πâ‡∏°‡∏≠‡∏¢‡∏π‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÄ‡∏•‡∏¢‡∏ô‡∏∞‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ üôà",
  "‡∏ñ‡πâ‡∏≤‡πÄ‡∏ò‡∏≠‡∏£‡∏π‡πâ ‡πÄ‡∏£‡∏≤‡∏Ñ‡∏á‡πÄ‡∏Ç‡∏¥‡∏ô‡∏Å‡∏ß‡πà‡∏≤‡∏ô‡∏µ‡πâ‡∏≠‡∏µ‡∏Å üò≥",
  "‡∏ô‡∏¥‡πâ‡∏ß‡πÄ‡∏ò‡∏≠‡πÉ‡∏Å‡∏•‡πâ‡∏°‡∏≤‡∏Å‡πÅ‡∏•‡πâ‡∏ß‡∏ô‡∏∞ üòÜ",
  "‡∏´‡∏±‡∏ß‡πÉ‡∏à‡πÄ‡∏£‡∏≤‡∏≠‡∏¢‡∏π‡πà‡∏ù‡∏±‡πà‡∏á‡∏ô‡∏±‡πâ‡∏ô‡∏à‡∏£‡∏¥‡∏á ‡πÜ ‡∏ô‡∏∞ üíû"
];
  
const finaleMessage = `‡∏£‡∏±‡∏Å‡∏ã‡∏±‡∏°‡∏°‡∏≤‡∏Å‡∏Å‡∏Å‡∏Å‡∏Å‡∏Å‡∏Å‡∏Å‡∏Å‡∏Å‡∏Å‡∏Å‡∏Å‡∏Å‡∏Å‡∏Å‡∏Å‡∏Å‡∏Å‡∏Å‡∏Å‡∏Å‡∏Å‡∏Å‡∏Å‡∏Å‡∏Å‡∏Å‡∏Å‡∏Å‡∏Å‡∏Å‡∏Å‡∏Å‡∏Å‡∏Å‡∏Å‡∏Å‡∏Å‡∏Å‡∏Å‡∏Å‡∏Å‡∏Å‡∏Å‡∏Å‡∏Å‡∏Åüòò`;

let typingController = null;

function typeWriter(el, text, speed = 30){
  if(typingController) typingController();

  el.innerHTML = "";
  let i = 0;
  let lastTime = 0;
  let running = true;

  function step(time){
    if(!running) return;

    if(time - lastTime >= speed){
      if(i < text.length){
        el.innerHTML += text[i] === "\n" ? "<br>" : text[i];
        i++;
        lastTime = time;
      }
    }

    if(i < text.length){
      requestAnimationFrame(step);
    }
  }

  requestAnimationFrame(step);

  typingController = () => running = false;
}

function openLetter(){
  overlay.style.display = "flex";
  typeWriter(textEl, introText, 40);
}

function accept(){
  overlay.style.display = "none";
  final.style.display = "flex";
  typeWriter(finalTextEl, finalMessage, 40);
  spawnHearts(35);
}

function closeFinal(){
  final.style.display = "none";
  hug.style.display = "flex";
  typeWriter(hugTextEl, hugMessage, 40);
  spawnHearts(50);
}

function closeHug(){
  hug.style.display = "none";
  ending.style.display = "flex";
  ending.style.opacity = "1";

  typeWriter(endingTextEl, endingMessage, 30);

  setTimeout(()=>{
    ending.style.display = "none";

    const finale = document.getElementById("grandFinale");
    const finaleTextEl = document.getElementById("finaleText");

    finale.style.display = "flex";
    typeWriter(finaleTextEl, finaleMessage, 40);

    spawnHearts(80);

  }, 6000);
}

function dodgeNo(){
  if(dodging) return;
  dodging = true;

  const box = document.querySelector(".buttons");
  const rect = box.getBoundingClientRect();

  const maxX = rect.width / 2 - 90;
  const maxY = 50;

  const x = Math.random() * maxX * 2 - maxX;
  const y = Math.random() * maxY * 2 - maxY;

  noBtn.style.transform =
    `translate(${x}px, ${y}px) rotate(${Math.random()*16-8}deg)`;

  const tease = teaseTexts[wordIndex % teaseTexts.length];
  wordIndex++;
  typeWriter(textEl, tease, 40);

  setTimeout(()=> dodging = false, 300);
}

noBtn.addEventListener("mouseenter", dodgeNo);
noBtn.addEventListener("touchstart", dodgeNo);
noBtn.addEventListener("click", dodgeNo);

const bg = document.querySelector('.bg-hearts');

for(let i=0;i<30;i++){
  const heart = document.createElement('div');
  heart.className = 'heart';

  const size = 24 + Math.random()*70; 
  heart.style.width = size + 'px';
  heart.style.height = size + 'px';

  heart.style.left = Math.random()*100 + '%';
  heart.style.animationDuration = 18 + Math.random()*24 + 's';
  heart.style.animationDelay = Math.random()*14 + 's';

  const blur = 2 + Math.random()*3;
  heart.style.filter = `
    blur(${blur}px)
    drop-shadow(0 0 ${blur*6}px #ff8fcf)
    drop-shadow(0 0 ${blur*10}px #ff4d9e)
  `;

  bg.appendChild(heart);
}

</script>
</body>
</html>
